<h2>Update Item Availability</h2>
<form action="{{ url_for('update_item') }}" method="post">
    <label for="itemID">Item ID:</label>
    <input type="text" name="itemID" required><br><br>
    <label for="availability">Availability:</label>
    <select name="availability" id="availability-dropdown">
        <option value="available">Available</option>
        <option value="Borrowed">Borrowed</option>
    </select><br><br>
    <div id="borrower-details" style="display:none;">
        <label for="borrower_name">Borrower Name:</label>
        <input type="text" name="borrower_name"><br><br>
        <label for="borrower_flatID">Borrower Flat ID:</label>
        <input type="text" name="borrower_flatID" min="1" max="144"><br><br>
    </div>
    <input type="submit" value="Update Item">

    <a href="{{ url_for('home') }}">Go BACK to MAIN MENU </a>

</form>

<script>
    // JavaScript to show/hide borrower details based on availability dropdown
    document.getElementById("availability-dropdown").onchange = function() {
        if (this.value == "Borrowed") {
            document.getElementById("borrower-details").style.display = "block";
        } else {
            document.getElementById("borrower-details").style.display = "none";
        }
    }

    document.querySelector("form").addEventListener("submit", function(e) {
    const flatIDInput = document.querySelector("[name='borrower_flatID']");
    const flatIDValue = parseInt(flatIDInput.value, 10);
    if (flatIDValue < 1 || flatIDValue > 144) {
        alert("Please insert the correct flat number");
        e.preventDefault(); // Prevent form submission
    }
})

</script>
